<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Deep Inspector</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/alpinejs/3.12.0/cdn.min.js" defer></script>
    <style>
        body { background-color: #0B0E14; color: #cbd5e1; font-family: 'Inter', sans-serif; }
        .glass { background: rgba(30, 41, 59, 0.4); backdrop-filter: blur(12px); border: 1px solid rgba(255, 255, 255, 0.05); }
        .glass-panel { background: #151b26; border: 1px solid #1e293b; }
        .tab-btn.active { border-bottom: 2px solid #3b82f6; color: white; background: rgba(59, 130, 246, 0.1); }
        .tab-btn { color: #64748b; }
        .loader { border: 3px solid rgba(255,255,255,0.1); border-top: 3px solid #3b82f6; border-radius: 50%; width: 20px; height: 20px; animation: spin 0.8s linear infinite; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        .grade-A, .grade-Ap { color: #22c55e; border-color: #22c55e; }
        .grade-B, .grade-C { color: #eab308; border-color: #eab308; }
        .grade-D, .grade-E, .grade-F { color: #ef4444; border-color: #ef4444; }
        .risk-High { border-left: 3px solid #ef4444; background: rgba(239, 68, 68, 0.1); }
        .risk-Medium { border-left: 3px solid #f59e0b; background: rgba(245, 158, 11, 0.1); }
        .risk-Low { border-left: 3px solid #3b82f6; background: rgba(59, 130, 246, 0.1); }
    </style>
</head>
<body class="min-h-screen" x-data="app()">
    <nav class="border-b border-gray-800 bg-[#0B0E14] sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-16">
                <div class="flex items-center gap-3">
                    <div class="w-8 h-8 bg-blue-600 rounded-lg flex items-center justify-center">
                        <i class="fas fa-bolt text-white text-sm"></i>
                    </div>
                    <span class="font-bold text-xl tracking-tight text-white">Deep Inspector</span>
                </div>
            </div>
        </div>
    </nav>
    <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-10">
        <div class="max-w-3xl mx-auto text-center mb-12">
            <h1 class="text-4xl font-bold text-white mb-4">Analyze any website instantly.</h1>
            <p class="text-gray-400 mb-8">Get Tech Stack, Carbon Footprint, Vulnerabilities, and SEO Data.</p>
            <div class="relative group">
                <div class="absolute -inset-1 bg-gradient-to-r from-blue-600 to-cyan-600 rounded-xl blur opacity-25 group-hover:opacity-50 transition duration-1000 group-hover:duration-200"></div>
                <div class="relative glass rounded-xl p-2 flex items-center shadow-2xl">
                    <i class="fas fa-search text-gray-500 ml-4"></i>
                    <input type="text" x-model="url" @keydown.enter="analyze()" placeholder="example.com" class="w-full bg-transparent border-none text-white px-4 py-3 focus:outline-none text-lg placeholder-gray-600">
                    <button @click="analyze()" class="bg-blue-600 hover:bg-blue-500 text-white px-6 py-2 rounded-lg font-medium transition-colors flex items-center gap-2" :disabled="loading">
                        <span x-show="!loading">Run Audit</span>
                        <div x-show="loading" class="loader"></div>
                    </button>
                </div>
            </div>
            <p class="text-red-400 text-sm mt-4 font-medium" x-text="error" x-show="error"></p>
        </div>
        <div x-show="results" x-transition.opacity.duration.500ms class="space-y-6">
            <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                <div class="glass-panel p-5 rounded-xl border-t-2" :class="results?.eco?.grade.includes('A')?'grade-Ap':'grade-'+results?.eco?.grade">
                    <div class="flex justify-between items-start mb-2"><div class="text-gray-400 text-xs font-bold uppercase">Eco Grade</div><i class="fas fa-leaf" :class="results?.eco?.grade.includes('A')?'grade-Ap':'grade-'+results?.eco?.grade"></i></div>
                    <div class="text-3xl font-bold text-white" x-text="results?.eco?.grade"></div>
                    <div class="text-xs text-gray-500 mt-1"><span x-text="results?.eco?.co2_grams"></span>g CO2/view</div>
                </div>
                <div class="glass-panel p-5 rounded-xl border-t-2 border-blue-500">
                    <div class="flex justify-between items-start mb-2"><div class="text-gray-400 text-xs font-bold uppercase">Speed</div><i class="fas fa-tachometer-alt text-blue-500"></i></div>
                    <div class="text-3xl font-bold text-white"><span x-text="results?.overview?.ttfb"></span><span class="text-lg text-gray-500 ml-1">ms</span></div>
                    <div class="text-xs text-gray-500 mt-1">Size: <span x-text="results?.overview?.size_kb"></span> KB</div>
                </div>
                <div class="glass-panel p-5 rounded-xl border-t-2 border-purple-500">
                    <div class="flex justify-between items-start mb-2"><div class="text-gray-400 text-xs font-bold uppercase">Security</div><i class="fas fa-shield-alt text-purple-500"></i></div>
                    <div class="text-3xl font-bold text-white"><span x-text="results?.security?.score"></span><span class="text-lg text-gray-500">/100</span></div>
                    <div class="text-xs text-gray-500 mt-1"><span x-text="results?.security?.vulns.length"></span> Issues Found</div>
                </div>
                <div class="glass-panel p-5 rounded-xl border-t-2 border-orange-500">
                    <div class="flex justify-between items-start mb-2"><div class="text-gray-400 text-xs font-bold uppercase">Links</div><i class="fas fa-link text-orange-500"></i></div>
                    <div class="text-3xl font-bold text-white" x-text="results?.links?.total"></div>
                    <div class="text-xs text-gray-500 mt-1">Int:<span x-text="results?.links?.internal"></span>|Ext:<span x-text="results?.links?.external"></span></div>
                </div>
            </div>
            <div class="glass-panel rounded-xl overflow-hidden min-h-[600px]">
                <div class="flex border-b border-gray-800">
                    <button @click="tab='tech'" :class="{'active':tab==='tech'}" class="flex-1 py-4 text-sm font-medium hover:bg-gray-800 transition tab-btn">Stack</button>
                    <button @click="tab='security'" :class="{'active':tab==='security'}" class="flex-1 py-4 text-sm font-medium hover:bg-gray-800 transition tab-btn">Security & Vulns</button>
                    <button @click="tab='seo'" :class="{'active':tab==='seo'}" class="flex-1 py-4 text-sm font-medium hover:bg-gray-800 transition tab-btn">SEO</button>
                    <button @click="tab='dns'" :class="{'active':tab==='dns'}" class="flex-1 py-4 text-sm font-medium hover:bg-gray-800 transition tab-btn">DNS & Ownership</button>
                </div>
                <div class="p-6 md:p-8">
                    <div x-show="tab==='tech'" class="animate-fade-in">
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-6"><template x-for="(items,category) in results?.tech"><div class="bg-gray-900/50 rounded-lg p-4 border border-gray-800"><div class="text-xs font-bold text-gray-500 uppercase tracking-wider mb-3" x-text="category"></div><div class="flex flex-wrap gap-2"><template x-for="item in items"><span class="bg-blue-500/10 text-blue-400 px-2.5 py-1 rounded text-sm border border-blue-500/20" x-text="item"></span></template></div></div></template></div>
                        <div x-show="Object.keys(results?.tech||{}).length===0" class="text-center text-gray-500 py-10">No stack detected.</div>
                    </div>

                    <div x-show="tab==='security'" class="animate-fade-in">
                        <!-- Vulnerabilities Section -->
                        <div class="mb-8">
                            <h3 class="text-sm font-bold text-gray-400 uppercase mb-4">Potential Vulnerabilities</h3>
                            <div class="space-y-3">
                                <template x-for="vuln in results?.security?.vulns">
                                    <div class="p-4 rounded-lg flex justify-between items-center" :class="'risk-'+vuln.risk">
                                        <div>
                                            <div class="text-sm font-bold text-white mb-1" x-text="vuln.name"></div>
                                            <div class="text-xs text-gray-400" x-text="vuln.desc"></div>
                                        </div>
                                        <span class="px-2 py-1 rounded text-xs font-bold uppercase text-white bg-black/20" x-text="vuln.risk"></span>
                                    </div>
                                </template>
                                <div x-show="results?.security?.vulns.length === 0" class="text-green-400 p-4 bg-green-900/10 rounded-lg border border-green-900/30">
                                    <i class="fas fa-check-circle mr-2"></i> No basic vulnerabilities detected.
                                </div>
                            </div>
                        </div>
                        <div class="overflow-hidden rounded-lg border border-gray-800">
                            <div class="bg-gray-900 px-6 py-2 text-xs text-gray-400 uppercase font-bold">Raw Headers Check</div>
                            <table class="w-full text-left"><tbody class="divide-y divide-gray-800 bg-gray-900/30"><template x-for="(status,header) in results?.security?.headers"><tr><td class="px-6 py-4 font-mono text-sm text-gray-300" x-text="header"></td><td class="px-6 py-4 text-right"><span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium" :class="status==='Present'?'bg-green-500/10 text-green-400':'bg-red-500/10 text-red-400'" x-text="status"></span></td></tr></template></tbody></table>
                        </div>
                    </div>

                    <div x-show="tab==='seo'" class="animate-fade-in space-y-8">
                        <div class="bg-gray-900/50 p-6 rounded-xl border border-gray-800"><h3 class="text-sm font-bold text-gray-400 uppercase mb-4">Meta Info</h3><div class="space-y-4"><div><div class="text-xs text-gray-500 mb-1">Title</div><div class="text-lg text-white font-medium" x-text="results?.overview?.title"></div></div><div><div class="text-xs text-gray-500 mb-1">Desc</div><div class="text-gray-400" x-text="results?.overview?.description"></div></div></div></div>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6"><div class="bg-gray-900/50 p-6 rounded-xl border border-gray-800 flex justify-between items-center"><div><div class="text-white font-bold">Robots.txt</div></div><span class="px-3 py-1 rounded-full text-xs font-bold" :class="results?.bots?.robots?'bg-green-500/10 text-green-400':'bg-red-500/10 text-red-400'" x-text="results?.bots?.robots?'Found':'Missing'"></span></div><div class="bg-gray-900/50 p-6 rounded-xl border border-gray-800 flex justify-between items-center"><div><div class="text-white font-bold">Sitemap.xml</div></div><span class="px-3 py-1 rounded-full text-xs font-bold" :class="results?.bots?.sitemap?'bg-green-500/10 text-green-400':'bg-red-500/10 text-red-400'" x-text="results?.bots?.sitemap?'Found':'Missing'"></span></div></div>
                        <div x-show="results?.socials?.length>0"><h3 class="text-sm font-bold text-gray-400 uppercase mb-4">Socials</h3><div class="flex flex-wrap gap-3"><template x-for="link in results?.socials"><a :href="link" target="_blank" class="bg-gray-800 hover:bg-gray-700 px-4 py-2 rounded-lg flex items-center gap-2 text-sm transition text-gray-300"><i class="fas fa-external-link-alt text-xs"></i><span x-text="new URL(link).hostname"></span></a></template></div></div>
                    </div>

                    <div x-show="tab==='dns'" class="animate-fade-in grid grid-cols-1 md:grid-cols-2 gap-8">
                        <div class="space-y-6"><h3 class="text-sm font-bold text-gray-400 uppercase">DNS</h3><div class="bg-gray-900/50 p-5 rounded-lg border border-gray-800"><div class="mb-4"><span class="text-xs font-bold text-blue-400 uppercase bg-blue-400/10 px-2 py-1 rounded">MX</span><ul class="mt-3 space-y-2"><template x-for="mx in results?.dns?.MX"><li class="font-mono text-sm text-gray-400 truncate" x-text="mx"></li></template><li x-show="results?.dns?.MX.length===0" class="text-gray-600 text-sm italic">None</li></ul></div><div class="border-t border-gray-800 pt-4"><span class="text-xs font-bold text-purple-400 uppercase bg-purple-400/10 px-2 py-1 rounded">A</span><ul class="mt-3 space-y-2"><template x-for="ip in results?.dns?.A"><li class="font-mono text-sm text-gray-400" x-text="ip"></li></template></ul></div></div></div>
                        <div class="space-y-6"><h3 class="text-sm font-bold text-gray-400 uppercase">Owner</h3><div class="bg-gray-900/50 p-5 rounded-lg border border-gray-800 space-y-4"><div class="flex justify-between border-b border-gray-800 pb-2"><span class="text-gray-500">Registrar</span><span class="text-white" x-text="results?.whois?.registrar||'?'"></span></div><div class="flex justify-between border-b border-gray-800 pb-2"><span class="text-gray-500">Org</span><span class="text-white" x-text="results?.whois?.org||'?'"></span></div><div class="flex justify-between border-b border-gray-800 pb-2"><span class="text-gray-500">Created</span><span class="text-white" x-text="results?.whois?.date||'?'"></span></div>
                        <div class="flex justify-between"><span class="text-gray-500">Expires</span><span class="text-red-400 font-bold" x-text="results?.whois?.expiration||'?'"></span></div>
                        </div></div>
                    </div>
                </div>
            </div>
        </div>
    </main>
    <script>function app(){return{url:'',loading:false,results:null,error:null,tab:'tech',async analyze(){if(!this.url)return;this.loading=true;this.error=null;this.results=null;try{const res=await fetch('/analyze',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({url:this.url})});const data=await res.json();if(data.error)this.error=data.error;else this.results=data}catch(e){this.error="Connection Error"}finally{this.loading=false}}}}</script>
</body>
</html>


